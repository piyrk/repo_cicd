{"ast":null,"code":"import _objectSpread from\"C:/Users/Piyush Kumar/Desktop/cicd_project/car-rental-system-frontend-master/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{useState,useEffect}from\"react\";import{useParams,useNavigate,Link}from\"react-router-dom\";import{useLocation}from\"react-router-dom\";import axios from\"axios\";import creditcard from\"../images/credit-card.png\";import{ToastContainer,toast}from\"react-toastify\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const BookingPayment=()=>{const location=useLocation();var booking=location.state;const sessionCustomer=JSON.parse(sessionStorage.getItem(\"active-customer\"));let navigate=useNavigate();const[paymentRequest,setPaymentRequest]=useState({bookingId:booking.id,nameOnCard:\"\",cardNo:\"\",cvv:\"\",expiryDate:\"\"});const handleUserInput=e=>{setPaymentRequest(_objectSpread(_objectSpread({},paymentRequest),{},{[e.target.name]:e.target.value}));};const payAndConfirmBooking=e=>{fetch(\"http://localhost:8080/api/booking/customer/payment\",{method:\"PUT\",headers:{Accept:\"application/json\",\"Content-Type\":\"application/json\"},body:JSON.stringify(paymentRequest)}).then(result=>{result.json().then(res=>{if(res.success){toast.success(res.responseMessage,{position:\"top-center\",autoClose:3000,hideProgressBar:false,closeOnClick:true,pauseOnHover:true,draggable:true,progress:undefined});setTimeout(()=>{navigate(\"/customer/bookings\");},2000);// Redirect after 3 seconds\n}else{toast.error(res.responseMessage,{position:\"top-center\",autoClose:1000,hideProgressBar:false,closeOnClick:true,pauseOnHover:true,draggable:true,progress:undefined});}});}).catch(error=>{console.error(error);toast.error(\"It seems server is down\",{position:\"top-center\",autoClose:1000,hideProgressBar:false,closeOnClick:true,pauseOnHover:true,draggable:true,progress:undefined});});e.preventDefault();};return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"div\",{className:\"d-flex align-items-center justify-content-center ms-5 mt-1 me-5 mb-3\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card form-card rounded-card h-100 custom-bg\",style:{maxWidth:\"900px\"},children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body header-logo-color\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"card-title text-color  text-center\",children:\"Payment Details\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"row mt-4\",children:[/*#__PURE__*/_jsx(\"div\",{class:\"col-sm-1 mt-2\"}),/*#__PURE__*/_jsx(\"div\",{class:\"col-sm-4 mt-2\",children:/*#__PURE__*/_jsx(\"img\",{src:creditcard,className:\"card-img-top rounded img-fluid\",alt:\"img\",style:{maxWidth:\"500px\"}})}),/*#__PURE__*/_jsx(\"div\",{class:\"col-sm-4 mt-2\",children:/*#__PURE__*/_jsxs(\"form\",{className:\"row g-3\",onSubmit:payAndConfirmBooking,children:[/*#__PURE__*/_jsxs(\"div\",{className:\" text-color\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"title\",className:\"form-label\",children:/*#__PURE__*/_jsx(\"b\",{children:\"Name on Card\"})}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",id:\"nameOnCard\",name:\"nameOnCard\",onChange:handleUserInput,value:paymentRequest.nameOnCard,placeholder:\"Name Surname\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3 text-color\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"title\",className:\"form-label\",children:/*#__PURE__*/_jsx(\"b\",{children:\"Card Number\"})}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",id:\"cardNo\",name:\"cardNo\",onChange:handleUserInput,value:paymentRequest.cardNo,placeholder:\"0000 0000 0000 0000\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col text-color\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"title\",className:\"form-label\",children:/*#__PURE__*/_jsx(\"b\",{children:\"Valid Through\"})}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",id:\"expiryDate\",name:\"expiryDate\",onChange:handleUserInput,value:paymentRequest.expiryDate,placeholder:\"01/24\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col text-color\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"title\",className:\"form-label\",children:/*#__PURE__*/_jsx(\"b\",{children:\"CVV\"})}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",className:\"form-control\",id:\"cvv\",name:\"cvv\",onChange:handleUserInput,value:paymentRequest.cvv,placeholder:\"123\",required:true})]}),/*#__PURE__*/_jsx(\"input\",{type:\"submit\",className:\"btn bg-color custom-bg-text ms-2 \",value:\"PAY \\u20B9 \".concat(booking.totalPrice)}),/*#__PURE__*/_jsx(ToastContainer,{})]})})]})]})})})});};export default BookingPayment;","map":{"version":3,"names":["useState","useEffect","useParams","useNavigate","Link","useLocation","axios","creditcard","ToastContainer","toast","jsx","_jsx","jsxs","_jsxs","BookingPayment","location","booking","state","sessionCustomer","JSON","parse","sessionStorage","getItem","navigate","paymentRequest","setPaymentRequest","bookingId","id","nameOnCard","cardNo","cvv","expiryDate","handleUserInput","e","_objectSpread","target","name","value","payAndConfirmBooking","fetch","method","headers","Accept","body","stringify","then","result","json","res","success","responseMessage","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","progress","undefined","setTimeout","error","catch","console","preventDefault","children","className","style","maxWidth","class","src","alt","onSubmit","htmlFor","type","onChange","placeholder","required","concat","totalPrice"],"sources":["C:/Users/Piyush Kumar/Desktop/cicd_project/car-rental-system-frontend-master/src/BookingComponent/BookingPayment.jsx"],"sourcesContent":["import { useState, useEffect } from \"react\";\nimport { useParams, useNavigate, Link } from \"react-router-dom\";\nimport { useLocation } from \"react-router-dom\";\nimport axios from \"axios\";\nimport creditcard from \"../images/credit-card.png\";\nimport { ToastContainer, toast } from \"react-toastify\";\n\nconst BookingPayment = () => {\n  const location = useLocation();\n  var booking = location.state;\n\n  const sessionCustomer = JSON.parse(sessionStorage.getItem(\"active-customer\"));\n\n  let navigate = useNavigate();\n\n  const [paymentRequest, setPaymentRequest] = useState({\n    bookingId: booking.id,\n    nameOnCard: \"\",\n    cardNo: \"\",\n    cvv: \"\",\n    expiryDate: \"\",\n  });\n\n  const handleUserInput = (e) => {\n    setPaymentRequest({\n      ...paymentRequest,\n      [e.target.name]: e.target.value,\n    });\n  };\n\n  const payAndConfirmBooking = (e) => {\n    fetch(\"http://localhost:8080/api/booking/customer/payment\", {\n      method: \"PUT\",\n      headers: {\n        Accept: \"application/json\",\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify(paymentRequest),\n    })\n      .then((result) => {\n        result.json().then((res) => {\n          if (res.success) {\n            toast.success(res.responseMessage, {\n              position: \"top-center\",\n              autoClose: 3000,\n              hideProgressBar: false,\n              closeOnClick: true,\n              pauseOnHover: true,\n              draggable: true,\n              progress: undefined,\n            });\n\n            setTimeout(() => {\n              navigate(\"/customer/bookings\");\n            }, 2000); // Redirect after 3 seconds\n          } else {\n            toast.error(res.responseMessage, {\n              position: \"top-center\",\n              autoClose: 1000,\n              hideProgressBar: false,\n              closeOnClick: true,\n              pauseOnHover: true,\n              draggable: true,\n              progress: undefined,\n            });\n          }\n        });\n      })\n      .catch((error) => {\n        console.error(error);\n        toast.error(\"It seems server is down\", {\n          position: \"top-center\",\n          autoClose: 1000,\n          hideProgressBar: false,\n          closeOnClick: true,\n          pauseOnHover: true,\n          draggable: true,\n          progress: undefined,\n        });\n      });\n    e.preventDefault();\n  };\n\n  return (\n    <div>\n      <div className=\"d-flex align-items-center justify-content-center ms-5 mt-1 me-5 mb-3\">\n        <div\n          className=\"card form-card rounded-card h-100 custom-bg\"\n          style={{\n            maxWidth: \"900px\",\n          }}\n        >\n          <div className=\"card-body header-logo-color\">\n            <h4 className=\"card-title text-color  text-center\">\n              Payment Details\n            </h4>\n\n            <div className=\"row mt-4\">\n              <div class=\"col-sm-1 mt-2\"></div>\n              <div class=\"col-sm-4 mt-2\">\n                <img\n                  src={creditcard}\n                  className=\"card-img-top rounded img-fluid\"\n                  alt=\"img\"\n                  style={{\n                    maxWidth: \"500px\",\n                  }}\n                />\n              </div>\n              <div class=\"col-sm-4 mt-2\">\n                <form className=\"row g-3\" onSubmit={payAndConfirmBooking}>\n                  <div className=\" text-color\">\n                    <label htmlFor=\"title\" className=\"form-label\">\n                      <b>Name on Card</b>\n                    </label>\n                    <input\n                      type=\"text\"\n                      className=\"form-control\"\n                      id=\"nameOnCard\"\n                      name=\"nameOnCard\"\n                      onChange={handleUserInput}\n                      value={paymentRequest.nameOnCard}\n                      placeholder=\"Name Surname\"\n                      required\n                    />\n                  </div>\n                  <div className=\"mb-3 text-color\">\n                    <label htmlFor=\"title\" className=\"form-label\">\n                      <b>Card Number</b>\n                    </label>\n                    <input\n                      type=\"text\"\n                      className=\"form-control\"\n                      id=\"cardNo\"\n                      name=\"cardNo\"\n                      onChange={handleUserInput}\n                      value={paymentRequest.cardNo}\n                      placeholder=\"0000 0000 0000 0000\"\n                      required\n                    />\n                  </div>\n\n                  <div className=\"col text-color\">\n                    <label htmlFor=\"title\" className=\"form-label\">\n                      <b>Valid Through</b>\n                    </label>\n                    <input\n                      type=\"text\"\n                      className=\"form-control\"\n                      id=\"expiryDate\"\n                      name=\"expiryDate\"\n                      onChange={handleUserInput}\n                      value={paymentRequest.expiryDate}\n                      placeholder=\"01/24\"\n                      required\n                    />\n                  </div>\n\n                  <div className=\"col text-color\">\n                    <label htmlFor=\"title\" className=\"form-label\">\n                      <b>CVV</b>\n                    </label>\n                    <input\n                      type=\"number\"\n                      className=\"form-control\"\n                      id=\"cvv\"\n                      name=\"cvv\"\n                      onChange={handleUserInput}\n                      value={paymentRequest.cvv}\n                      placeholder=\"123\"\n                      required\n                    />\n                  </div>\n\n                  <input\n                    type=\"submit\"\n                    className=\"btn bg-color custom-bg-text ms-2 \"\n                    value={`PAY â‚¹ ${booking.totalPrice}`}\n                  />\n                  <ToastContainer />\n                </form>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default BookingPayment;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}