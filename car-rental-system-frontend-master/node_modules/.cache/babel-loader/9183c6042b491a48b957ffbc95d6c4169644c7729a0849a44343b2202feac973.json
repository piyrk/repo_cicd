{"ast":null,"code":"import _objectSpread from\"C:/Users/Piyush Kumar/Desktop/cicd_project/car-rental-system-frontend-master/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{useState,useEffect}from\"react\";import axios from\"axios\";import{toast}from\"react-toastify\";import{useNavigate}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const AddDrivingLicense=()=>{const user=JSON.parse(sessionStorage.getItem(\"active-customer\"));let navigate=useNavigate();const[selectedImage,setSelectImage]=useState(null);const[addLicenseRequest,setAddLicenseRequest]=useState({customerId:user.id,licenseNumber:\"\",expirationDate:\"\"});const handleInput=e=>{setAddLicenseRequest(_objectSpread(_objectSpread({},addLicenseRequest),{},{[e.target.name]:e.target.value}));};const saveLicense=e=>{e.preventDefault();if(addLicenseRequest===null){toast.error(\"invalid input!!!\",{position:\"top-center\",autoClose:3000,hideProgressBar:false,closeOnClick:true,pauseOnHover:true,draggable:true,progress:undefined});return;}const formData=new FormData();formData.append(\"customerId\",addLicenseRequest.customerId);formData.append(\"licenseNumber\",addLicenseRequest.licenseNumber);formData.append(\"expirationDate\",addLicenseRequest.expirationDate);formData.append(\"licensePic\",selectedImage);axios.post(\"http://localhost:8080/api/user/add/driving-licence\",formData// , {\n//   headers: {\n//     Authorization: \"Bearer \" + employer_jwtToken, // Replace with your actual JWT token\n//   },\n// }\n).then(resp=>{let response=resp.data;if(response.success){toast.success(response.responseMessage,{position:\"top-center\",autoClose:1000,hideProgressBar:false,closeOnClick:true,pauseOnHover:true,draggable:true,progress:undefined});setTimeout(()=>{navigate(\"/home\");},2000);// Redirect after 3 seconds\n}else if(!response.success){toast.error(response.responseMessage,{position:\"top-center\",autoClose:1000,hideProgressBar:false,closeOnClick:true,pauseOnHover:true,draggable:true,progress:undefined});setTimeout(()=>{window.location.reload(true);},2000);// Redirect after 3 seconds\n}else{toast.error(\"It Seems Server is down!!!\",{position:\"top-center\",autoClose:1000,hideProgressBar:false,closeOnClick:true,pauseOnHover:true,draggable:true,progress:undefined});// setTimeout(() => {\n//   window.location.reload(true);\n// }, 2000); // Redirect after 3 seconds\n}}).catch(error=>{console.error(error);toast.error(\"It seems server is down\",{position:\"top-center\",autoClose:1000,hideProgressBar:false,closeOnClick:true,pauseOnHover:true,draggable:true,progress:undefined});// setTimeout(() => {\n//   window.location.reload(true);\n// }, 2000); // Redirect after 3 seconds\n});};return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"div\",{class:\"mt-2 d-flex aligns-items-center justify-content-center mb-4\",children:/*#__PURE__*/_jsx(\"div\",{class:\"card form-card custom-bg\",style:{width:\"60rem\"},children:/*#__PURE__*/_jsxs(\"div\",{className:\"container-fluid\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header bg-color custom-bg-text mt-2 text-center\",style:{borderRadius:\"1em\",height:\"45px\"},children:/*#__PURE__*/_jsx(\"h5\",{class:\"card-title\",children:\"Add Driving License\"})}),/*#__PURE__*/_jsx(\"div\",{class:\"card-body text-color\",children:/*#__PURE__*/_jsxs(\"form\",{className:\"row g-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-6 mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"title\",className:\"form-label\",children:/*#__PURE__*/_jsx(\"b\",{children:\"License Number\"})}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",id:\"licenseNumber\",name:\"licenseNumber\",onChange:handleInput,value:addLicenseRequest.licenseNumber})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-6 mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"title\",className:\"form-label\",children:/*#__PURE__*/_jsx(\"b\",{children:\"Expiry Date\"})}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",className:\"form-control\",id:\"expirationDate\",name:\"expirationDate\",onChange:handleInput,value:addLicenseRequest.expirationDate})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-6 mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{for:\"formFile\",class:\"form-label\",children:/*#__PURE__*/_jsx(\"b\",{children:\" Select License Pic\"})}),/*#__PURE__*/_jsx(\"input\",{class:\"form-control\",type:\"file\",id:\"image\",name:\"image\",onChange:e=>setSelectImage(e.target.files[0]),required:true})]}),/*#__PURE__*/_jsx(\"div\",{className:\"d-flex aligns-items-center justify-content-center mb-2\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",class:\"btn bg-color custom-bg-text\",onClick:saveLicense,children:/*#__PURE__*/_jsx(\"b\",{children:\" Add License\"})})})]})})]})})})});};export default AddDrivingLicense;","map":{"version":3,"names":["useState","useEffect","axios","toast","useNavigate","jsx","_jsx","jsxs","_jsxs","AddDrivingLicense","user","JSON","parse","sessionStorage","getItem","navigate","selectedImage","setSelectImage","addLicenseRequest","setAddLicenseRequest","customerId","id","licenseNumber","expirationDate","handleInput","e","_objectSpread","target","name","value","saveLicense","preventDefault","error","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","progress","undefined","formData","FormData","append","post","then","resp","response","data","success","responseMessage","setTimeout","window","location","reload","catch","console","children","class","style","width","className","borderRadius","height","htmlFor","type","onChange","for","files","required","onClick"],"sources":["C:/Users/Piyush Kumar/Desktop/cicd_project/car-rental-system-frontend-master/src/UserComponent/AddDrivingLicense.jsx"],"sourcesContent":["import { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport { toast } from \"react-toastify\";\nimport { useNavigate } from \"react-router-dom\";\n\nconst AddDrivingLicense = () => {\n  const user = JSON.parse(sessionStorage.getItem(\"active-customer\"));\n  let navigate = useNavigate();\n  const [selectedImage, setSelectImage] = useState(null);\n\n  const [addLicenseRequest, setAddLicenseRequest] = useState({\n    customerId: user.id,\n    licenseNumber: \"\",\n    expirationDate: \"\",\n  });\n\n  const handleInput = (e) => {\n    setAddLicenseRequest({\n      ...addLicenseRequest,\n      [e.target.name]: e.target.value,\n    });\n  };\n\n  const saveLicense = (e) => {\n    e.preventDefault();\n    if (addLicenseRequest === null) {\n      toast.error(\"invalid input!!!\", {\n        position: \"top-center\",\n        autoClose: 3000,\n        hideProgressBar: false,\n        closeOnClick: true,\n        pauseOnHover: true,\n        draggable: true,\n        progress: undefined,\n      });\n\n      return;\n    }\n\n    const formData = new FormData();\n    formData.append(\"customerId\", addLicenseRequest.customerId);\n    formData.append(\"licenseNumber\", addLicenseRequest.licenseNumber);\n    formData.append(\"expirationDate\", addLicenseRequest.expirationDate);\n    formData.append(\"licensePic\", selectedImage);\n\n    axios\n      .post(\n        \"http://localhost:8080/api/user/add/driving-licence\",\n        formData\n        // , {\n        //   headers: {\n        //     Authorization: \"Bearer \" + employer_jwtToken, // Replace with your actual JWT token\n        //   },\n        // }\n      )\n      .then((resp) => {\n        let response = resp.data;\n\n        if (response.success) {\n          toast.success(response.responseMessage, {\n            position: \"top-center\",\n            autoClose: 1000,\n            hideProgressBar: false,\n            closeOnClick: true,\n            pauseOnHover: true,\n            draggable: true,\n            progress: undefined,\n          });\n\n          setTimeout(() => {\n            navigate(\"/home\");\n          }, 2000); // Redirect after 3 seconds\n        } else if (!response.success) {\n          toast.error(response.responseMessage, {\n            position: \"top-center\",\n            autoClose: 1000,\n            hideProgressBar: false,\n            closeOnClick: true,\n            pauseOnHover: true,\n            draggable: true,\n            progress: undefined,\n          });\n          setTimeout(() => {\n            window.location.reload(true);\n          }, 2000); // Redirect after 3 seconds\n        } else {\n          toast.error(\"It Seems Server is down!!!\", {\n            position: \"top-center\",\n            autoClose: 1000,\n            hideProgressBar: false,\n            closeOnClick: true,\n            pauseOnHover: true,\n            draggable: true,\n            progress: undefined,\n          });\n          // setTimeout(() => {\n          //   window.location.reload(true);\n          // }, 2000); // Redirect after 3 seconds\n        }\n      })\n      .catch((error) => {\n        console.error(error);\n        toast.error(\"It seems server is down\", {\n          position: \"top-center\",\n          autoClose: 1000,\n          hideProgressBar: false,\n          closeOnClick: true,\n          pauseOnHover: true,\n          draggable: true,\n          progress: undefined,\n        });\n        // setTimeout(() => {\n        //   window.location.reload(true);\n        // }, 2000); // Redirect after 3 seconds\n      });\n  };\n\n  return (\n    <div>\n      <div class=\"mt-2 d-flex aligns-items-center justify-content-center mb-4\">\n        <div class=\"card form-card custom-bg\" style={{ width: \"60rem\" }}>\n          <div className=\"container-fluid\">\n            <div\n              className=\"card-header bg-color custom-bg-text mt-2 text-center\"\n              style={{\n                borderRadius: \"1em\",\n                height: \"45px\",\n              }}\n            >\n              <h5 class=\"card-title\">Add Driving License</h5>\n            </div>\n            <div class=\"card-body text-color\">\n              <form className=\"row g-3\">\n                <div className=\"col-md-6 mb-3\">\n                  <label htmlFor=\"title\" className=\"form-label\">\n                    <b>License Number</b>\n                  </label>\n                  <input\n                    type=\"text\"\n                    className=\"form-control\"\n                    id=\"licenseNumber\"\n                    name=\"licenseNumber\"\n                    onChange={handleInput}\n                    value={addLicenseRequest.licenseNumber}\n                  />\n                </div>\n                <div className=\"col-md-6 mb-3\">\n                  <label htmlFor=\"title\" className=\"form-label\">\n                    <b>Expiry Date</b>\n                  </label>\n                  <input\n                    type=\"date\"\n                    className=\"form-control\"\n                    id=\"expirationDate\"\n                    name=\"expirationDate\"\n                    onChange={handleInput}\n                    value={addLicenseRequest.expirationDate}\n                  />\n                </div>\n\n                <div className=\"col-md-6 mb-3\">\n                  <label for=\"formFile\" class=\"form-label\">\n                    <b> Select License Pic</b>\n                  </label>\n                  <input\n                    class=\"form-control\"\n                    type=\"file\"\n                    id=\"image\"\n                    name=\"image\"\n                    onChange={(e) => setSelectImage(e.target.files[0])}\n                    required\n                  />\n                </div>\n\n                <div className=\"d-flex aligns-items-center justify-content-center mb-2\">\n                  <button\n                    type=\"submit\"\n                    class=\"btn bg-color custom-bg-text\"\n                    onClick={saveLicense}\n                  >\n                    <b> Add License</b>\n                  </button>\n                </div>\n              </form>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default AddDrivingLicense;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}